<!DOCTYPE html>
<html>
  <head>



  </head>
  <body>
    <canvas id = "rityta" width="600" height="600" style="border: 1px solid black;">

    </canvas>

    <script>
      let x = 100;
      let y = 100;
      let vx = 0;
      let vy = 0;
      let size = 50;
      // [x,y,bredd,höjd]
      wall = [300, 300, 50, 150, 200, 400, 100, 40, 0,0,300,60]
      canvas = document.getElementById("rityta");
      ctx = canvas.getContext("2d");



      document.addEventListener("keydown", function(event)
    {
      if(event.key == "d") vx+= 1;
      if(event.key == "a") vx-= 1;
      if(event.key == "w") vy-= 1;
      if(event.key == "s") vy+= 1;
      });


      function collision()
      {
        for(let i = 0; i<wall.length; i+=4)
      {
        if(wall[i]-size<x && x<wall[i]+wall[i+2] && y>wall[i+1]-size && y<wall[i+1]+wall[i+3]) return true;
        
      }

      return false;

      }

      //själva main-loop
      function run()
      {
        x += vx;
        y += vy;

        //stuts
        //höger
        if(x >= canvas.width-size)
      {
        vx = vx*(-1);
      }
      //vänster
      if(x <= 0)
      {
        vx = vx*(-1);
      }
      //botten
        if(y >= canvas.height-size)
      {
        vy = vy*(-1);
      }
      //toppe
      if(y<= 0)
      {
        vy = vy*(-1);
      }


        //töm skärm
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle="red";
        ctx.fillRect(x,y,size,size);
        ctx.fillStyle="black";
        for(let i = 0;i<wall.length; i += 4)
      {
        ctx.fillRect(wall[i],wall[i+1],wall[i+2],wall[i+3]);
      }

        if(collision() == true)
      {
        vx = vx*(-1);
        vy = vy*(-1);
      }

        //funktionen anropas ika många ggr/sek som uppdateringsfrekvensen på skärmen.
        requestAnimationFrame(run)
      }

      run()
    </script>
  </body>
</html>